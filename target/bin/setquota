#! /bin/bash

# shellcheck source=../scripts/helpers/index.sh
source /usr/local/bin/helpers/index.sh

source ./common/helper.sh
source ./common/quota.sh

function _main
{
  local MAIL_ACCOUNT="${1}"
  shift
  local QUOTA="${*}"

  _validate_parameters
  _quota_set_for_mail_account "${MAIL_ACCOUNT}" "${QUOTA}"
}

function __usage { echo 'Usage: setquota <user@domain> [<quota>]' ; }

function _validate_parameters
{
  _arg_expect_mail_account_has_local_and_domain_parts
  _account_should_already_exist

  _arg_expect_quota_valid_unit
}

_main "${@}"
