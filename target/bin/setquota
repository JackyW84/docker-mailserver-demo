#! /bin/bash

# shellcheck source=../scripts/helpers/index.sh
source /usr/local/bin/helpers/index.sh

source ./common/quota.sh

function _main
{
  local MAIL_ACCOUNT="${1}"
  shift
  local QUOTA="${*}"

  _validate_parameter_user
  _validate_parameter_quota
  _quota_set_for_mail_account "${MAIL_ACCOUNT}" "${QUOTA}"
}

function __usage { echo 'Usage: setquota <user@domain> [<quota>]' ; }

function _validate_parameter_user
{
  _provided_mail_account_with_local_and_domain_parts

  local DATABASE='/tmp/docker-mailserver/postfix-accounts.cf'
  source ./common/helper.sh
  _account_should_already_exist
}

_main "${@}"
