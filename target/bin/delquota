#! /bin/bash

# shellcheck source=../scripts/helpers/index.sh
source /usr/local/bin/helpers/index.sh

source ./common/quota.sh

function _main
{
  [[ ${1:-} == 'help' ]] && { __usage ; exit 0 ; }

  local MAIL_ACCOUNT="${1}"

  _validate_parameter_user
  _quota_remove_for_mail_account
}

function __usage { echo 'Usage: delquota <username@domain>' ; }

function _validate_parameter_user
{
  _provided_mail_account_with_local_and_domain_parts

  local DATABASE='/tmp/docker-mailserver/postfix-accounts.cf'
  source ./common/helper.sh
  _account_should_already_exist
}

_main "${@}"
