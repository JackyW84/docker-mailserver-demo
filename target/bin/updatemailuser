#! /bin/bash

# shellcheck source=../scripts/helpers/index.sh
source /usr/local/bin/helpers/index.sh

source ./common/helper.sh
source ./common/account.sh

function _main
{
  local MAIL_ACCOUNT="${1}"
  shift
  local PASSWD="${*}"

  _validate_parameters

  local DATABASE_ACCOUNTS='/tmp/docker-mailserver/postfix-accounts.cf'
  _account_update_password_in_db "${MAIL_ACCOUNT}" "${PASSWD}" "${DATABASE_ACCOUNTS}"
}

function __usage { echo 'Usage: updatemailuser <user@domain.tld> [password]' ; }

function _validate_parameters
{
  _arg_expect_mail_account
}

_main "${@}"
