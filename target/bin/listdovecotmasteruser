#! /bin/bash

# shellcheck source=../scripts/helpers/index.sh
source /usr/local/bin/helpers/index.sh
source ./common/helper.sh

# suppress error output, e.g. when listmailuser runs in a fresh container (DMS not running)
# shellcheck source=/dev/null
source /etc/dms-settings 2>/dev/null

function _main
{
  local DATABASE_DOVECOT_MASTERS='/tmp/docker-mailserver/dovecot-masters.cf'
  _list_entries "${DATABASE_DOVECOT_MASTERS}"
}

# Used by `_list_entries`:
# Returns the mail account (value of input line, before the `|` delimiter)
function _list_format_entry
{
  echo "${1}" | cut -d'|' -f1
}

_main
