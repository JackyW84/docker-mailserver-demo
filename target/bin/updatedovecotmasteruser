#! /bin/bash

# shellcheck source=../scripts/helpers/index.sh
source /usr/local/bin/helpers/index.sh

source ./common/helper.sh
source ./common/account.sh

function _main
{
  local MAIL_ACCOUNT="${1}"
  shift
  local PASSWD="${*}"

  _validate_parameters

  local DATABASE_DOVECOT_MASTERS='/tmp/docker-mailserver/dovecot-masters.cf'
  _account_update_password_in_db "${MAIL_ACCOUNT}" "${PASSWD}" "${DATABASE_DOVECOT_MASTERS}"
}

function __usage { echo 'Usage: updatedovecotmasteruser <MAIL ACCOUNT> [PASSWORD]' ; }

function _validate_parameters
{
  _arg_expect_mail_account
}

_main "${@}"
